(library (fluent)
  (export fluent)
  (import
    (scheme)
    (syntaxes))

  (define-rules-syntax (literals with)
    ((fluent expr)
      expr)
    ((fluent expr (with with-var with-expr) rest ...)
      (let ((with-var expr))
        (fluent with-expr rest ...)))
    ((fluent expr (fn arg ...) rest ...)
      (let ((var expr))
        (fluent (fn var arg ...) rest ...)))))
